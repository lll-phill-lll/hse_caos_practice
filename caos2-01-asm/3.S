//  Содержимое стека  Адреса в памяти
//
//  .                .
//  .                .
//  .                .
//  +----------------+ 0x000000000000F040
//  |                |
//  +----------------+ 0x000000000000F048 <-- вершина стека (на неё указывает rsp)
//  |     данные     |
//  +----------------+ 0x000000000000F050
//  |     данные     |
//  +----------------+ 0x000000000000F058
//  .                .
//  .                .
//  .                .
//  +----------------+ 0x000000000000FFF0
//  |     данные     |
//  +----------------+ 0x000000000000FFF8
//  |     данные     |
//  +----------------+ 0x0000000000010000 <-- дно стека


    .intel_syntax noprefix
    .global main

main:
    // [ return   xxxxx ]
    //   ^rsp

    mov     rax, 100
    push    rax
    // [ 100   return   xxxxx ]
    //   ^rsp

    mov     rax, 500
    push    rax
    // [ 500   100   return   xxxxx ]
    //   ^rsp

    mov     rdi, [rsp]
    //      rdi = 500
    mov     rdi, [rsp + 8]
    //      rdi = 100

    pop     rdi
    // [ 500   100   return   xxxxx ]
    //         ^rsp
    // rdi = 500

    pop     rdi
    // [ 500   100   return   xxxxx ]
    //               ^rsp
    // rdi = 100

    ret

